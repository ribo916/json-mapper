{
  "name": "ui-to-external-pricing",
  "version": "1.0.0",
  "description": "UI â†’ External Pricing Scenario mapping (matches uiToExternalPricingScenario.ts).",

  "enums": {
    "LoanPurpose": {
      "1": "Purchase",
      "2": "Refinance",
      "3": "Construction",
      "4": "ConstructionPerm",
      "5": "Other",
      "6": "NoCashOutRefinance",
      "7": "CashOutRefinance"
    },
    "LoanRefinancePurpose": {
      "0": "None",
      "1": "NoCashOut",
      "2": "CashOut",
      "3": "LimitedCashOut",
      "4": "HomeImprovement",
      "5": "DebtConsolidation",
      "6": "Other"
    },
    "Occupancy": {
      "0": "None",
      "1": "PrimaryResidence",
      "2": "SecondHome",
      "3": "InvestmentProperty"
    },
    "PropertyType": {
      "1": "SFR",
      "2": "Condominium",
      "3": "PUD",
      "5": "Mobile",
      "6": "TwoForUnit",
      "7": "Cooperative",
      "8": "Townhome",
      "9": "Multifamily",
      "10": "Commercial",
      "11": "MixedUse",
      "12": "Farm",
      "13": "HomeAndBusiness",
      "14": "Land",
      "15": "ManufacturedSingleWide",
      "16": "ManufacturedDoubleWide"
    },
    "Impounds": {
      "0": "None",
      "1": "Partial",
      "2": "Full"
    },
    "LoanType": {
      "1": "Conventional",
      "2": "FHA",
      "3": "VA",
      "4": "USDA",
      "5": "Jumbo",
      "8": "NonQM",
      "9": "HELOC"
    },
    "LoanPosition": {
      "0": "First",
      "1": "Second",
      "2": "HELOC",
      "3": "Third"
    },
    "SearchPosition": {
      "1": "First",
      "2": "Second",
      "3": "HELOC",
      "4": "Third"
    },
    "EmploymentDocumentationMethod": {
      "0": "None",
      "1": "Stated",
      "2": "Verified"
    },
    "VerificationMethod": {
      "1": "FullDocument",
      "2": "BankStatement",
      "3": "VOE",
      "4": "AssetQualification",
      "5": "DSCR",
      "6": "Method1099",
      "7": "CPAPAndL"
    },
    "Citizenship": {
      "0": "None",
      "1": "ForeignNational",
      "2": "NonPermanentResidentAlien",
      "3": "PermanentResidentAlien",
      "4": "USCitizen",
      "5": "USCitizenAbroad"
    },
    "TemporaryBuydown": {
      "0": "None",
      "1": "ThreeTwoOne",
      "2": "TwoOne",
      "3": "OneOne",
      "4": "OneZero"
    },
    "PropertyAttachment": {
      "0": "Unspecified",
      "1": "Detached",
      "2": "Attached"
    },
    "AUS": {
      "0": "None",
      "1": "Manual",
      "2": "DU",
      "3": "LP",
      "4": "Other",
      "5": "NotSpecified"
    },
    "StreamlineRefinanceType": {
      "0": "None",
      "1": "NoCashoutStreamlinedRefinance",
      "2": "NoCashOutFHAStreamlinedRefinance"
    },
    "PrepayPenaltyStructureType": {
      "0": "None",
      "1": "NoPrepay",
      "2": "Fixed",
      "3": "Declining",
      "4": "SixMonthsInterest"
    },
    "CreditGrade": {
      "0": "None",
      "1": "A",
      "2": "B",
      "3": "C",
      "4": "D",
      "5": "APlus",
      "6": "BMinus",
      "7": "AAA",
      "8": "AA",
      "9": "AMinus",
      "10": "BB",
      "11": "BPlus",
      "12": "CMinus",
      "13": "BBB",
      "14": "CCC",
      "15": "CC",
      "16": "CPlus",
      "17": "DDD",
      "18": "DD",
      "19": "DPlus",
      "20": "DMinus"
    },
    "BrokerPaidBy": {
      "1": "Lender",
      "2": "Borrower",
      "3": "Split"
    },
    "FHAFinancingOption": {
      "0": "Finance",
      "1": "PaidInCash"
    },
    "VAFinancingOption": {
      "0": "Finance",
      "1": "PaidInCash"
    },
    "USDAFinanceOption": {
      "0": "Finance",
      "1": "PaidInCash"
    }
  },

  "converters": {
    "toDecimal": {
      "description": "Convert number/string to a decimal string with up to 4 places, trimming trailing zeros."
    }
  },

  "paths": {},

  "mapping": {
    "audienceId": {
      "from": ["AudienceId", "audienceId"]
    },

    "search": {
      "position": {
        "from": "Search.Position",
        "enum": "SearchPosition"
      },
      "desiredLockPeriod": {
        "from": "Search.desiredLockPeriod"
      },
      "includeInterestOnlyProducts": {
        "from": "Search.includeInterestOnlyProducts",
        "default": false
      },
      "loanTypes": {
        "from": "Search.loanTypes",
        "enum": "LoanType",
        "default": []
      },
      "amortizationTypes": {
        "from": "Search.amortizationTypes",
        "default": []
      },
      "loanTerms": {
        "from": "Search.loanTerms",
        "default": [],
        "compute": "Array.isArray(get('Search.loanTerms')) ? get('Search.loanTerms').map(t => parseInt(t, 10)) : []"
      },
      "armFixedTerms": {
        "from": "Search.armFixedTerms",
        "default": []
      }
    },

    "settings": {
      "static": {
        "operations": ["Eligibility", "Pricing"],
        "returnTerseResponse": false,
        "returnTerseProductResponse": false,
        "returnIneligibleProducts": true,
        "storeRequestResult": true
      }
    },

    "borrower": {
      "firstName": {
        "from": "Borrower.firstName",
        "default": ""
      },
      "lastName": {
        "from": "Borrower.lastName",
        "default": ""
      },
      "fico": {
        "from": "Borrower.fico",
        "convert": "toNumberSafe"
      },
      "dtiRatio": {
        "from": "Borrower.dtiRatio",
        "convert": "toNumberSafe"
      },
      "monthsOfReserves": {
        "from": "Borrower.monthsOfReserves",
        "convert": "toNumberSafe",
        "default": 0
      },
      "isNonOccupancyBorrower": {
        "from": "Borrower.isNonOccupancyBorrower",
        "default": false
      },
      "isNonOccupancyCoborrower": {
        "from": "Borrower.isNonOccupancyCoborrower",
        "default": false
      },
      "propertiesOwned": {
        "from": "Borrower.propertiesOwned",
        "default": 0
      },
      "isSelfEmployed": {
        "from": "Borrower.isSelfEmployed",
        "default": false
      },
      "multipleBorrowerPairs": {
        "from": "Borrower.multipleBorrowerPairs",
        "default": false
      },

      "verificationMethod": {
        "from": "Borrower.verificationMethod",
        "enum": "VerificationMethod"
      },
      "creditGrade": {
        "from": "Borrower.creditGrade",
        "enum": "CreditGrade"
      },
      "citizenship": {
        "from": "Borrower.citizenship",
        "enum": "Citizenship"
      },
      "employmentDocumentationMethod": {
        "from": "Borrower.employmentDocumentationMethod",
        "enum": "EmploymentDocumentationMethod"
      },

      "isNonTraditionalCredit": {
        "from": "Borrower.isNonTraditionalCredit",
        "default": false
      },
      "isGiftFunds": {
        "from": "Borrower.isGiftFunds",
        "default": false
      },
      "isFirstTimeHomeBuyer": {
        "from": "Borrower.isFirstTimeHomeBuyer",
        "default": false
      },
      "fullDocMonths": {
        "from": "Borrower.fullDocMonths",
        "default": 0
      },
      "cpaPandLMonths": {
        "from": "Borrower.cpaPandLMonths",
        "default": 0
      },
      "annualIncome": {
        "from": "Borrower.income",
        "default": 0
      }
    },

    "loan": {
      "fhaTotalLoanAmount": {
        "from": "Loan.fhaTotalLoanAmount",
        "convert": "toNumberSafe"
      },
      "fhaMortgageInsurancePremium": {
        "from": "Loan.fhaMortgageInsurancePremium",
        "convert": "toNumberSafe"
      },
      "fhaMortgageInsurancePremiumAmount": {
        "from": "Loan.fhaMortgageInsurancePremiumAmount",
        "convert": "toNumberSafe"
      },
      "fhaFinanceAmount": {
        "from": "Loan.fhaFinanceAmount",
        "convert": "toNumberSafe"
      },
      "fhaCaseAssignmentDate": {
        "from": "Loan.fhaCaseAssignmentDate",
        "convert": "toDateOrNull"
      },
      "vaTotalLoanAmount": {
        "from": "Loan.vaTotalLoanAmount",
        "convert": "toNumberSafe"
      },       
      "vaDownPayment": {
        "from": "Loan.vaDownPayment",
        "convert": "toNumberSafe"
      },     
      "vaDownPaymentAmount": {
        "from": "Loan.vaDownPaymentAmount",
        "convert": "toNumberSafe"
      },
      "vaFundingFee": {
        "from": "Loan.vaFundingFee",
        "convert": "toNumberSafe"
      },            
      "vaFundingFeeAmount": {
        "from": "Loan.vaFundingFeeAmount",
        "convert": "toNumberSafe"
      },
      "vaFinanceAmount": {
        "from": "Loan.vaFinanceAmount",
        "convert": "toNumberSafe"
      },
      "vaCashoutLTV": {
        "from": "Loan.vaCashoutLTV",
        "convert": "toNumberSafe"
      },
      "vaCashoutCLTV": {
        "from": "Loan.vaCashoutCLTV",
        "convert": "toNumberSafe"
      },
      "vaCashoutHCLTV": {
        "from": "Loan.vaCashoutHCLTV",
        "convert": "toNumberSafe"
      },
      "vaLoanHistory": {
        "from": "Loan.vaLoanHistory"
      },
      "vaFinancingOption": {
        "from": "Loan.vaFinancingOption",
        "enum:": "VAFinancingOption"
      },
      "usdaFinanceOption": {
        "from": "Loan.usdaFinanceOption",
        "enum": "USDAFinanceOption"
      },
      "usdaTotalLoanAmount": {
        "from": "Loan.usdaTotalLoanAmount",
        "convert": "toNumberSafe"
      },
      "usdaGuaranteeFee": {
        "from": "Loan.usdaGuaranteeFee",
        "convert": "toNumberSafe"
      },
      "usdaGuaranteeFeeAmount": {
        "from": "Loan.usdaGuaranteeFee",
        "convert": "toNumberSafe"
      },
      "usdaFinanceAmount": {
        "from": "Loan.usdaFinanceAmount",
        "convert": "toNumberSafe"
      },
      "servicerName": {
        "from": "Loan.usdaFinanceAmount",
        "convert": "toNumberSafe"
      },
      "prepaymentPenaltyPeriodMonths": {
        "from": "Loan.prepaymentPenaltyPeriodMonths",
        "convert": "toNumberSafe"
      },
      "fhaFinancingOption": {
        "from": "Loan.fhaFinancingOption",
        "enum": "FHAFinancingOption"
      },
      "purpose": {
        "from": "Loan.purpose",
        "enum": "LoanPurpose"
      },
      "amount": {
        "from": "Loan.amount",
        "convert": "toNumberSafe"
      },
      "purchasePrice": {
        "from": "Loan.purchasePrice",
        "convert": "toNumberSafe"
      },
      "propertyValue": {
        "from": "Loan.propertyValue",
        "convert": "toNumberSafe"
      },
      "refinancePurpose": {
        "from": "Loan.refinancePurpose",
        "enum": "LoanRefinancePurpose"
      },

      "cashOutAmount": {
        "from": "Loan.cashOutAmount",
        "convert": "toNumberSafe"
      },
      "secondAmount": {
        "from": "Loan.secondAmount",
        "convert": "toNumberSafe"
      },
      "helocLineAmount": {
        "from": "Loan.helocLineAmount",
        "convert": "toNumberSafe"
      },
      "helocDrawAmount": {
        "from": "Loan.helocDrawAmount",
        "convert": "toNumberSafe"
      },

      "isMortgageInsurancePaidByBorrower": {
        "from": "Loan.isMortgageInsurancePaidByBorrower",
        "default": false
      },

      "impounds": {
        "from": "Loan.impounds",
        "enum": "Impounds"
      },
      "aus": {
        "from": "Loan.aus",
        "enum": "AUS"
      },
      "position": {
        "from": "Loan.position",
        "enum": "LoanPosition"
      },

      "temporaryBuydownType": {
        "from": "Loan.temporaryBuydownType",
        "enum": "TemporaryBuydown"
      },
      "streamlineRefinanceType": {
        "from": "Loan.streamlineRefinanceType",
        "enum": "StreamlineRefinanceType"
      },
      "prepaymentPenaltyStructureType": {
        "from": "Loan.prepaymentPenaltyStructureType",
        "enum": "PrepayPenaltyStructureType"
      },

      "loanType": {
        "from": "Loan.loanType",
        "enum": "LoanType"
      },

      "ltv": {
        "from": "Loan.ltv",
        "convert": "toNumberSafe"
      },
      "cltv": {
        "from": "Loan.cltv",
        "convert": "toNumberSafe"
      },
      "hcltv": {
        "from": "Loan.hcltv",
        "convert": "toNumberSafe"
      }
    },

    "property": {
      "estimatedValue": {
        "from": "Property.EstimatedValue",
        "convert": "toNumberSafe"
      },
      "appraisedValue": {
        "from": "Property.appraisedValue",
        "convert": "toNumberSafe" 
      },
      "state": {
        "from": "Property.state"
      },
      "county": {
        "from": "Property.county"
      },
      "propertyType": {
        "from": "Property.propertyType",
        "enum": "PropertyType"
      },
      "occupancy": {
        "from": "Property.occupancy",
        "enum": "Occupancy"
      },
      "units": {
        "from": "Property.units",
        "default": 1,
        "convert": "toNumberSafe"
      },
      "stories": {
        "from": "Property.stories",
        "default": 1
      },
      "addressLine1": {
        "from": "Property.addressLine1"
      },
      "addressLine2": {
        "from": "Property.addressLine2",
        "default": ""
      },
      "city": {
        "from": "Property.city"
      },
      "stateFipsCode": {
        "from": "Property.stateFipsCode"
      },
      "countyFipsCode": {
        "from": "Property.countyFipsCode"
      },
      "zipCode": {
        "from": "Property.zipCode"
      },
      "propertyAttachmentType": {
        "from": "Property.propertyAttachmentType",
        "enum": "PropertyAttachment"
      }
    },

    "brokerCompPlan": {
      "fixedAmount": {
        "from": "BrokerCompPlan.fixedAmount",
        "convert": "toNumberSafe"
      },
      "percent": {
        "from": "BrokerCompPlan.percent",
        "convert": "toNumberSafe"
      },
      "minAmount": {
        "from": "BrokerCompPlan.minAmount",
        "convert": "toNumberSafe"
      },
      "maxAmount": {
        "from": "BrokerCompPlan.maxAmount",
        "convert": "toNumberSafe"
      },
      "calculatedAmount": {
        "from": "BrokerCompPlan.calculatedAmount",
        "convert": "toNumberSafe"
      },
      "calculatedAdjustment": {
        "from": "BrokerCompPlan.calculatedAdjustment",
        "convert": "toNumberSafe"
      },
      "paidBy": {
        "from": "BrokerCompPlan.paidBy",
        "enum": "BrokerPaidBy"
      }
    },

    "customValues": {
      "compute": "Array.isArray(src.CustomValues) ? src.CustomValues.filter(cv => cv && cv.value !== undefined && cv.value !== null && cv.value !== '').map(cv => ({ name: cv.name, value: String(cv.value) })) : []"
    }
  },

  "overrides": {}
}
